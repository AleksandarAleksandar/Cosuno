{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{toast}from'react-toastify';import{createCompany,getCompanies}from'../resources';import{useNavigate}from'react-router-dom';import{classes,stylesheet}from'typestyle';import{INPUT_FIELD}from'../utils/constants';import{Button}from'../utils/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var styles=stylesheet({addCompFrom:{display:'flex',flexDirection:'column',alignItems:'center',$nest:{'& > *':{padding:'0.5rem'}}},inputField:{width:'20rem'},buttons:{display:'flex',$nest:{'& > *:first-child':{marginRight:'.5rem'}}}});export function CompanyForm(_ref){var setCompanies=_ref.setCompanies;var _useState=useState({name:'',city:'',speciality:''}),_useState2=_slicedToArray(_useState,2),_useState2$=_useState2[0],name=_useState2$.name,city=_useState2$.city,speciality=_useState2$.speciality,setFormData=_useState2[1];var navigator=useNavigate();var onChange=function onChange(e){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.name,e.target.value));});};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var companyData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(name.length===0||city.length===0||speciality.length===0)){_context.next=4;break;}toast.error('Please make sure all fields have required information',{position:'top-right',autoClose:1500,closeOnClick:true,hideProgressBar:true});return _context.abrupt(\"return\");case 4:companyData={name:name,city:city,speciality:speciality};createCompany({companyData:companyData}).then(function(response){toast.success('You have created a company '+response.data.name,{position:'top-center',autoClose:1500,closeOnClick:true,hideProgressBar:true});setFormData({name:'',speciality:'',city:''});getCompanies().then(function(companies){return setCompanies(companies.data.companies);});}).catch(function(e){var error=e;toast.error(error.response.data.message,{position:'top-right',autoClose:1500,closeOnClick:true,hideProgressBar:true});});case 6:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();//todo abstract away input fields into something more generic\nreturn/*#__PURE__*/_jsxs(\"form\",{className:styles.addCompFrom,onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:name,placeholder:\"Enter company name\",onChange:onChange,className:classes(INPUT_FIELD,styles.inputField)})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"city\",id:\"city\",name:\"city\",value:city,placeholder:\"Enter your city\",onChange:onChange,className:classes(INPUT_FIELD,styles.inputField)})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"speciality\",id:\"speciality\",name:\"speciality\",value:speciality,placeholder:\"Enter speciality\",onChange:onChange,className:classes(INPUT_FIELD,styles.inputField)})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",title:'Submit'}),/*#__PURE__*/_jsx(Button,{type:'button',onClick:function onClick(){navigator('/');},title:'Cancel'})]})]});}","map":{"version":3,"names":["React","useState","toast","createCompany","getCompanies","useNavigate","classes","stylesheet","INPUT_FIELD","Button","styles","addCompFrom","display","flexDirection","alignItems","$nest","padding","inputField","width","buttons","marginRight","CompanyForm","setCompanies","name","city","speciality","setFormData","navigator","onChange","e","prevState","target","value","onSubmit","preventDefault","length","error","position","autoClose","closeOnClick","hideProgressBar","companyData","then","response","success","data","companies","catch","message"],"sources":["/Users/aleksandarvasiljevic/github/Cosuno/client/src/views/CompanyForm.tsx"],"sourcesContent":["import React, { FormEvent, useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { createCompany, getCompanies } from '../resources';\nimport { AxiosErrorWithMessage, Company } from './common';\nimport { useNavigate } from 'react-router-dom';\nimport { classes, stylesheet } from 'typestyle';\nimport { INPUT_FIELD } from '../utils/constants';\nimport { Button } from '../utils/Button';\n\nconst styles = stylesheet({\n    addCompFrom: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        $nest: {\n            '& > *': {\n                padding: '0.5rem',\n            },\n        },\n    },\n    inputField: {\n        width: '20rem',\n    },\n    buttons: {\n        display: 'flex',\n        $nest: {\n            '& > *:first-child': {\n                marginRight: '.5rem',\n            },\n        },\n    },\n});\ntype CompanyFormProps = {\n    setCompanies: (company: Company[]) => void;\n};\n\nexport function CompanyForm({ setCompanies }: CompanyFormProps) {\n    const [{ name, city, speciality }, setFormData] = useState({\n        name: '',\n        city: '',\n        speciality: '',\n    });\n\n    const navigator = useNavigate();\n\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setFormData((prevState) => ({\n            ...prevState,\n            [e.target.name]: e.target.value,\n        }));\n    };\n    const onSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        if (name.length === 0 || city.length === 0 || speciality.length === 0) {\n            toast.error('Please make sure all fields have required information', {\n                position: 'top-right',\n                autoClose: 1500,\n                closeOnClick: true,\n                hideProgressBar: true,\n            });\n            return;\n        }\n\n        const companyData = {\n            name,\n            city,\n            speciality,\n        };\n        createCompany({ companyData })\n            .then((response) => {\n                toast.success('You have created a company ' + response.data.name, {\n                    position: 'top-center',\n                    autoClose: 1500,\n                    closeOnClick: true,\n                    hideProgressBar: true,\n                });\n                setFormData({ name: '', speciality: '', city: '' });\n                getCompanies().then((companies) => setCompanies(companies.data.companies));\n            })\n            .catch((e) => {\n                const error = e as AxiosErrorWithMessage;\n                toast.error(error.response.data.message, {\n                    position: 'top-right',\n                    autoClose: 1500,\n                    closeOnClick: true,\n                    hideProgressBar: true,\n                });\n            });\n    };\n    //todo abstract away input fields into something more generic\n    return (\n        <form className={styles.addCompFrom} onSubmit={onSubmit}>\n            <div>\n                <input\n                    type=\"text\"\n                    id=\"name\"\n                    name=\"name\"\n                    value={name}\n                    placeholder=\"Enter company name\"\n                    onChange={onChange}\n                    className={classes(INPUT_FIELD, styles.inputField)}\n                />\n            </div>\n            <div>\n                <input\n                    type=\"city\"\n                    id=\"city\"\n                    name=\"city\"\n                    value={city}\n                    placeholder=\"Enter your city\"\n                    onChange={onChange}\n                    className={classes(INPUT_FIELD, styles.inputField)}\n                />\n            </div>\n            <div>\n                <input\n                    type=\"speciality\"\n                    id=\"speciality\"\n                    name=\"speciality\"\n                    value={speciality}\n                    placeholder=\"Enter speciality\"\n                    onChange={onChange}\n                    className={classes(INPUT_FIELD, styles.inputField)}\n                />\n            </div>\n\n            <div className={styles.buttons}>\n                <Button type=\"submit\" title={'Submit'} />\n                <Button\n                    type={'button'}\n                    onClick={() => {\n                        navigator('/');\n                    }}\n                    title={'Cancel'}\n                />\n            </div>\n        </form>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}