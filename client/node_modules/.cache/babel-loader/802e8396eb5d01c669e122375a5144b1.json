{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/aleksandarvasiljevic/github/Cosuno/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from'react';import{toast}from'react-toastify';import{register}from'../resources';import{classes,stylesheet}from'typestyle';import{INPUT_FIELD}from'../utils/constants';import{Button}from'../utils/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var styles=stylesheet({registerForm:{$nest:{'& > *':{padding:'0.2rem'}}},inputField:{width:'10rem'},buttons:{display:'flex',$nest:{'& > *:first-child':{marginRight:'.5rem'}}}});export function Register(_ref){var setUser=_ref.setUser,setShowRegister=_ref.setShowRegister;var _useState=useState({name:'',email:'',password:'',password2:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var name=formData.name,email=formData.email,password=formData.password,password2=formData.password2;var onChange=function onChange(e){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.name,e.target.value));});};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var userData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(password!==password2){toast.error('Passwords do not match');}else{userData={name:name,email:email,password:password};register({registerData:userData}).then(function(response){localStorage.setItem('user',JSON.stringify(response.data));setUser(response.data);setShowRegister();toast.success('Welcome '+response.data.name,{position:'top-center',autoClose:1500,closeOnClick:true,hideProgressBar:true});}).catch(function(e){var error=e;toast.error(error.response.data.message,{position:'top-right',autoClose:1500,closeOnClick:true,hideProgressBar:true});});}case 2:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:styles.registerForm,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:name,placeholder:\"Enter your name\",onChange:onChange,className:classes(INPUT_FIELD,styles.inputField)})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:email,placeholder:\"Enter your email\",onChange:onChange,className:classes(INPUT_FIELD,styles.inputField)})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:password,placeholder:\"Enter password\",onChange:onChange,className:classes(INPUT_FIELD,styles.inputField)})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password2\",name:\"password2\",value:password2,placeholder:\"Confirm password\",onChange:onChange,className:classes(INPUT_FIELD,styles.inputField)})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",title:'Submit'}),/*#__PURE__*/_jsx(Button,{type:'button',onClick:function onClick(){setShowRegister();},title:'Cancel'})]})]})})});}","map":{"version":3,"names":["React","useState","toast","register","classes","stylesheet","INPUT_FIELD","Button","styles","registerForm","$nest","padding","inputField","width","buttons","display","marginRight","Register","setUser","setShowRegister","name","email","password","password2","formData","setFormData","onChange","e","prevState","target","value","onSubmit","preventDefault","error","userData","registerData","then","response","localStorage","setItem","JSON","stringify","data","success","position","autoClose","closeOnClick","hideProgressBar","catch","message"],"sources":["/Users/aleksandarvasiljevic/github/Cosuno/client/src/views/Register.tsx"],"sourcesContent":["import React, { FormEvent } from 'react';\nimport { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { register } from '../resources';\nimport { AxiosErrorWithMessage } from './common';\nimport { classes, stylesheet } from 'typestyle';\nimport { INPUT_FIELD } from '../utils/constants';\nimport { Button } from '../utils/Button';\n\nconst styles = stylesheet({\n    registerForm: {\n        $nest: {\n            '& > *': {\n                padding: '0.2rem',\n            },\n        },\n    },\n    inputField: {\n        width: '10rem',\n    },\n    buttons: {\n        display: 'flex',\n        $nest: {\n            '& > *:first-child': {\n                marginRight: '.5rem',\n            },\n        },\n    },\n});\n\ntype RegisterProps = {\n    setUser: (user: { name: string } | null) => void;\n    setShowRegister: () => void;\n};\nexport function Register({ setUser, setShowRegister }: RegisterProps) {\n    const [formData, setFormData] = useState({\n        name: '',\n        email: '',\n        password: '',\n        password2: '',\n    });\n\n    const { name, email, password, password2 } = formData;\n\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setFormData((prevState) => ({\n            ...prevState,\n            [e.target.name]: e.target.value,\n        }));\n    };\n\n    const onSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n\n        if (password !== password2) {\n            toast.error('Passwords do not match');\n        } else {\n            const userData = {\n                name,\n                email,\n                password,\n            };\n            register({ registerData: userData })\n                .then((response) => {\n                    localStorage.setItem('user', JSON.stringify(response.data));\n                    setUser(response.data);\n                    setShowRegister();\n                    toast.success('Welcome ' + response.data.name, {\n                        position: 'top-center',\n                        autoClose: 1500,\n                        closeOnClick: true,\n                        hideProgressBar: true,\n                    });\n                })\n                .catch((e) => {\n                    const error = e as AxiosErrorWithMessage;\n                    toast.error(error.response.data.message, {\n                        position: 'top-right',\n                        autoClose: 1500,\n                        closeOnClick: true,\n                        hideProgressBar: true,\n                    });\n                });\n        }\n    };\n\n    return (\n        <>\n            <section>\n                <form onSubmit={onSubmit} className={styles.registerForm}>\n                    <div>\n                        <input\n                            type=\"text\"\n                            id=\"name\"\n                            name=\"name\"\n                            value={name}\n                            placeholder=\"Enter your name\"\n                            onChange={onChange}\n                            className={classes(INPUT_FIELD, styles.inputField)}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <input\n                            type=\"email\"\n                            id=\"email\"\n                            name=\"email\"\n                            value={email}\n                            placeholder=\"Enter your email\"\n                            onChange={onChange}\n                            className={classes(INPUT_FIELD, styles.inputField)}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <input\n                            type=\"password\"\n                            id=\"password\"\n                            name=\"password\"\n                            value={password}\n                            placeholder=\"Enter password\"\n                            onChange={onChange}\n                            className={classes(INPUT_FIELD, styles.inputField)}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <input\n                            type=\"password\"\n                            id=\"password2\"\n                            name=\"password2\"\n                            value={password2}\n                            placeholder=\"Confirm password\"\n                            onChange={onChange}\n                            className={classes(INPUT_FIELD, styles.inputField)}\n                        />\n                    </div>\n                    <div className={styles.buttons}>\n                        <Button type=\"submit\" title={'Submit'} />\n                        <Button\n                            type={'button'}\n                            onClick={() => {\n                                setShowRegister();\n                            }}\n                            title={'Cancel'}\n                        />\n                    </div>\n                </form>\n            </section>\n        </>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}